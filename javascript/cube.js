(function(){var e,t,n,r,o,i,s,u,c,h,p,f,l,v,a,w,m,y,g,d,S,E,D,U,B,C,F,L,R,b,M,J,N,O,k,z,x,I,j,q,A,G;g=(N=[0,1,2,3,4,5])[0],y=N[1],v=N[2],o=N[3],m=N[4],e=N[5],F=(O=[0,1,2,3,4,5,6,7])[0],D=O[1],B=O[2],S=O[3],c=O[4],p=O[5],s=O[6],l=O[7],C=(k=[0,1,2,3,4,5,6,7,8,9,10,11])[0],E=k[1],U=k[2],d=k[3],f=k[4],u=k[5],h=k[6],i=k[7],w=k[8],a=k[9],t=k[10],n=k[11],A=function(e){return G(9)+e},j=function(e){return A(9)+e},I=function(e){return j(9)+e},q=function(e){return I(9)+e},x=function(e){return q(9)+e},z=[[4,13,22,31,40,49],[[(G=function(e){return e-1})(9),A(1),j(3)],[G(7),j(1),q(3)],[G(1),q(1),x(3)],[G(3),x(1),A(3)],[I(3),j(9),A(7)],[I(1),q(9),j(7)],[I(7),x(9),q(7)],[I(9),A(9),x(7)]],[[G(6),A(2)],[G(8),j(2)],[G(4),q(2)],[G(2),x(2)],[I(6),A(8)],[I(2),j(8)],[I(4),q(8)],[I(8),x(8)],[j(6),A(4)],[j(4),q(6)],[x(6),q(4)],[x(4),A(6)]]],b=z[1],J=z[2],L=["U","R","F","D","L","B"],R=[["U","R","F"],["U","F","L"],["U","L","B"],["U","B","R"],["D","F","R"],["D","L","F"],["D","B","L"],["D","R","B"]],M=[["U","R"],["U","F"],["U","L"],["U","B"],["D","R"],["D","F"],["D","L"],["D","B"],["F","R"],["F","L"],["B","L"],["B","R"]],r=function(){var r,N,O,k,z,x;function I(e){null!=e?this.init(e):this.identity(),this.newCenter=function(){var e,t;for(t=[],e=0;e<=5;++e)t.push(0);return t}(),this.newCp=function(){var e,t;for(t=[],e=0;e<=7;++e)t.push(0);return t}(),this.newEp=function(){var e,t;for(t=[],e=0;e<=11;++e)t.push(0);return t}(),this.newCo=function(){var e,t;for(t=[],e=0;e<=7;++e)t.push(0);return t}(),this.newEo=function(){var e,t;for(t=[],e=0;e<=11;++e)t.push(0);return t}()}return I.prototype.init=function(e){return this.center=e.center.slice(0),this.co=e.co.slice(0),this.ep=e.ep.slice(0),this.cp=e.cp.slice(0),this.eo=e.eo.slice(0)},I.prototype.identity=function(){return this.center=[0,1,2,3,4,5],this.cp=[0,1,2,3,4,5,6,7],this.co=function(){var e,t;for(t=[],e=0;e<=7;++e)t.push(0);return t}(),this.ep=[0,1,2,3,4,5,6,7,8,9,10,11],this.eo=function(){var e,t;for(t=[],e=0;e<=11;++e)t.push(0);return t}()},I.prototype.toJSON=function(){return{center:this.center,cp:this.cp,co:this.co,ep:this.ep,eo:this.eo}},I.prototype.asString=function(){var e,t,n,r,o,i,s,u,c,h,p;for(p=[],n=r=0;r<=5;n=++r)p[9*n+4]=L[this.center[n]];for(n=o=0;o<=7;n=++o)for(e=this.cp[n],c=this.co[n],s=i=0;i<=2;s=++i)p[b[n][(s+c)%3]]=R[e][s];for(n=u=0;u<=11;n=++u)for(t=this.ep[n],c=this.eo[n],s=h=0;h<=1;s=++h)p[J[n][(s+c)%2]]=M[t][s];return p.join("")},I.fromString=function(e){var t,n,r,o,i,s,u,c,h,p,f,l,v,a;for(r=new I,o=s=0;s<=5;o=++s)for(i=u=0;u<=5;i=++u)e[9*o+4]===L[i]&&(r.center[o]=i);for(o=c=0;c<=7;o=++c){for(p=h=0;h<=2&&("U"!==(v=e[b[o][p]])&&"D"!==v);p=++h);for(t=e[b[o][(p+1)%3]],n=e[b[o][(p+2)%3]],i=f=0;f<=7;i=++f)t===R[i][1]&&n===R[i][2]&&(r.cp[o]=i,r.co[o]=p%3)}for(o=l=0;l<=11;o=++l)for(i=a=0;a<=11;i=++a){if(e[J[o][0]]===M[i][0]&&e[J[o][1]]===M[i][1]){r.ep[o]=i,r.eo[o]=0;break}if(e[J[o][0]]===M[i][1]&&e[J[o][1]]===M[i][0]){r.ep[o]=i,r.eo[o]=1;break}}return r},I.prototype.clone=function(){return new I(this.toJSON())},I.prototype.randomize=(x=function(e,t){return e+(Math.random()*(t-e+1)|0)},k=function(e){var t,n,r,o,i,s,u,c;for(c=[],t=n=0,i=(r=e.length-1)-2;0<=i?n<=i:n>=i;t=0<=i?++n:--n)t!==(o=x(t,r))?(s=[e[o],e[t]],e[t]=s[0],e[o]=s[1],c.push((u=[e[r-1],e[r]],e[r]=u[0],e[r-1]=u[1],u))):c.push(void 0);return c},z=function(e,t){var n,r,o,i;for(o=0,n=r=0,i=e.length-2;0<=i?r<=i:r>=i;n=0<=i?++r:--r)o+=e[n]=x(0,t-1);return e[e.length-1]=(t-o%t)%t},function(){return k(this.cp),k(this.ep),z(this.co,3),z(this.eo,2),this}),I.random=function(){return(new I).randomize()},I.prototype.isSolved=function(){var e,t,n,r,o,i,s;for((n=this.clone()).move(n.upright()),t=o=0;o<=5;t=++o)if(n.center[t]!==t)return!1;for(e=i=0;i<=7;e=++i){if(n.cp[e]!==e)return!1;if(0!==n.co[e])return!1}for(r=s=0;s<=11;r=++s){if(n.ep[r]!==r)return!1;if(0!==n.eo[r])return!1}return!0},I.prototype.centerMultiply=function(e){var t,n,r,o;for(o=n=0;n<=5;o=++n)t=e.center[o],this.newCenter[o]=this.center[t];return r=[this.newCenter,this.center],this.center=r[0],this.newCenter=r[1],this},I.prototype.cornerMultiply=function(e){var t,n,r,o,i;for(i=n=0;n<=7;i=++n)t=e.cp[i],this.newCp[i]=this.cp[t],this.newCo[i]=(this.co[t]+e.co[i])%3;return r=[this.newCp,this.cp],this.cp=r[0],this.newCp=r[1],o=[this.newCo,this.co],this.co=o[0],this.newCo=o[1],this},I.prototype.edgeMultiply=function(e){var t,n,r,o,i;for(i=n=0;n<=11;i=++n)t=e.ep[i],this.newEp[i]=this.ep[t],this.newEo[i]=(this.eo[t]+e.eo[i])%2;return r=[this.newEp,this.ep],this.ep=r[0],this.newEp=r[1],o=[this.newEo,this.eo],this.eo=o[0],this.newEo=o[1],this},I.prototype.multiply=function(e){return this.centerMultiply(e),this.cornerMultiply(e),this.edgeMultiply(e),this},I.moves=[{center:[0,1,2,3,4,5],cp:[S,F,D,B,c,p,s,l],co:[0,0,0,0,0,0,0,0],ep:[d,C,E,U,f,u,h,i,w,a,t,n],eo:[0,0,0,0,0,0,0,0,0,0,0,0]},{center:[0,1,2,3,4,5],cp:[c,D,B,F,l,p,s,S],co:[2,0,0,1,1,0,0,2],ep:[w,E,U,d,n,u,h,i,f,a,t,C],eo:[0,0,0,0,0,0,0,0,0,0,0,0]},{center:[0,1,2,3,4,5],cp:[D,p,B,S,F,c,s,l],co:[1,2,0,0,2,1,0,0],ep:[C,a,U,d,f,w,h,i,E,u,t,n],eo:[0,1,0,0,0,1,0,0,1,1,0,0]},{center:[0,1,2,3,4,5],cp:[F,D,B,S,p,s,l,c],co:[0,0,0,0,0,0,0,0],ep:[C,E,U,d,u,h,i,f,w,a,t,n],eo:[0,0,0,0,0,0,0,0,0,0,0,0]},{center:[0,1,2,3,4,5],cp:[F,B,s,S,c,D,p,l],co:[0,1,2,0,0,2,1,0],ep:[C,E,t,d,f,u,a,i,w,U,h,n],eo:[0,0,0,0,0,0,0,0,0,0,0,0]},{center:[0,1,2,3,4,5],cp:[F,D,S,l,c,p,B,s],co:[0,0,1,2,0,0,2,1],ep:[C,E,U,n,f,u,h,t,w,a,d,i],eo:[0,0,0,1,0,0,0,1,0,0,1,1]},{center:[g,v,m,o,e,y],cp:[F,D,B,S,c,p,s,l],co:[0,0,0,0,0,0,0,0],ep:[C,E,U,d,f,u,h,i,a,t,n,w],eo:[0,0,0,0,0,0,0,0,1,1,1,1]},{center:[e,y,g,v,m,o],cp:[F,D,B,S,c,p,s,l],co:[0,0,0,0,0,0,0,0],ep:[C,d,U,i,f,E,h,u,w,a,t,n],eo:[0,1,0,1,0,1,0,1,0,0,0,0]},{center:[m,g,v,y,o,e],cp:[F,D,B,S,c,p,s,l],co:[0,0,0,0,0,0,0,0],ep:[U,E,h,d,C,u,f,i,w,a,t,n],eo:[1,0,1,0,1,0,1,0,0,0,0,0]}],N={U:0,R:1,F:2,D:3,L:4,B:5,E:6,M:7,S:8,x:9,y:10,z:11,u:12,r:13,f:14,d:15,l:16,b:17},r={0:"U",1:"R",2:"F",3:"D",4:"L",5:"B",6:"E",7:"M",8:"S",9:"x",10:"y",11:"z",12:"u",13:"r",14:"f",15:"d",16:"l",17:"b"},O=function(e){var t,n,r,o,i,s,u;if("string"==typeof e){for(u=[],t=0,n=(s=e.split(/\s+/)).length;t<n;t++)if(0!==(o=s[t]).length){if(o.length>2)throw new Error("Invalid move: "+o);if(void 0===(r=N[o[0]]))throw new Error("Invalid move: "+o);if(1===o.length)i=0;else if("2"===o[1])i=1;else{if("'"!==o[1])throw new Error("Invalid move: "+o);i=2}u.push(3*r+i)}return u}return null!=e.length?e:[e]},I.prototype.move=function(e){var t,n,r,o,i,s,u;for(n=0,o=(s=O(e)).length;n<o;n++)for(t=(i=s[n])/3|0,r=0,u=i%3;0<=u?r<=u:r>=u;0<=u?++r:--r)this.multiply(I.moves[t]);return this},I.prototype.upright=function(){var t,n,r,i,s,u;for(t=this.clone(),u=[],n=i=0;i<=5&&t.center[n]!==v;n=++i);switch(n){case o:u.push("x");break;case g:u.push("x'");break;case e:u.push("x2");break;case y:u.push("y");break;case m:u.push("y'")}for(u.length&&t.move(u[0]),r=s=0;s<=5&&t.center[r]!==g;r=++s);switch(r){case m:u.push("z");break;case y:u.push("z'");break;case o:u.push("z2")}return u.join(" ")},I.inverse=function(e){var t,n,o,i,s,u,c;if((u=function(){var n,r,o,u;for(u=[],n=0,r=(o=O(e)).length;n<r;n++)i=o[n],t=i/3|0,s=i%3,u.push(3*t-(s-1)+1);return u}()).reverse(),"string"==typeof e){for(c="",n=0,o=u.length;n<o;n++)i=u[n],c+=r[t=i/3|0],1===(s=i%3)?c+="2":2===s&&(c+="'"),c+=" ";return c.substring(0,c.length-1)}return null!=e.length?u:u[0]},I.moves.push((new I).move("R M' L'").toJSON()),I.moves.push((new I).move("U E' D'").toJSON()),I.moves.push((new I).move("F S B'").toJSON()),I.moves.push((new I).move("U E'").toJSON()),I.moves.push((new I).move("R M'").toJSON()),I.moves.push((new I).move("F S").toJSON()),I.moves.push((new I).move("D E").toJSON()),I.moves.push((new I).move("L M").toJSON()),I.moves.push((new I).move("B S'").toJSON()),I}(),"undefined"!=typeof module&&null!==module?module.exports=r:this.Cube=r}).call(this);
